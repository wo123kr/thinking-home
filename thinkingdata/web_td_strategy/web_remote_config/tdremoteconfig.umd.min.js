((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).TDRemoteConfig=t()})(this,function(){function T(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function c(o){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=o.apply(e,s);function i(e){T(r,t,n,i,a,"next",e)}function a(e){T(r,t,n,i,a,"throw",e)}i(void 0)})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(r.key),r)}}function l(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(){var g,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",n=e.toStringTag||"@@toStringTag";function r(e,t,n,r){var i,a,s,o,c,u,l,f,h,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype);return y(t,"_invoke",(i=e,a=n,l=r||[],f=!1,h={p:u=0,n:0,v:g,a:d,f:d.bind(g,4),d:function(e,t){return s=e,o=0,c=g,h.n=t,p}},function(e,t,n){if(1<u)throw TypeError("Generator is already running");for(f&&1===t&&d(t,n),o=t,c=n;(v=o<2?g:c)||!f;){s||(o?o<3?(1<o&&(h.n=-1),d(o,c)):h.n=c:h.v=c);try{if(u=2,s){if(v=s[e=o?e:"next"]){if(!(v=v.call(s,c)))throw TypeError("iterator result is not an object");if(!v.done)return v;c=v.value,o<2&&(o=0)}else 1===o&&(v=s.return)&&v.call(s),o<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),o=1);s=g}else if((v=(f=h.n<0)?c:i.call(a,h))!==p)break}catch(e){s=g,o=1,c=e}finally{u=1}}return{value:v,done:f}}),!0),t;function d(e,t){for(o=e,c=t,v=0;!f&&u&&!n&&v<l.length;v++){var n,r=l[v],i=h.p,a=r[2];3<e?(n=a===t)&&(c=r[(o=r[4])?5:o=3],r[4]=r[5]=g):r[0]<=i&&((n=e<2&&i<r[1])?(o=0,h.v=t,h.n=r[1]):i<a&&(n=e<3||r[0]>t||a<t)&&(r[4]=e,r[5]=t,h.n=a,o=0))}if(n||1<e)return p;throw f=!0,t}}var p={};function m(){}function i(){}function a(){}var v=Object.getPrototypeOf,e=[][t]?v(v([][t]())):(y(v={},t,function(){return this}),v),s=a.prototype=m.prototype=Object.create(e);function o(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,y(e,n,"GeneratorFunction")),e.prototype=Object.create(s),e}return y(s,"constructor",i.prototype=a),y(a,"constructor",i),y(a,n,i.displayName="GeneratorFunction"),y(s),y(s,n,"Generator"),y(s,t,function(){return this}),y(s,"toString",function(){return"[object Generator]"}),(d=function(){return{w:r,m:o}})()}function y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(y=function(e,t,n,r){function i(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))})(e,t,n,r)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}for(var x="1.1.1",E="default",D=2592e3,U=43200,P="immediately",L="next",O="datetime",N=-10002,R=-10004,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"==typeof Uint8Array?[]:new Uint8Array(256),e=0;e<o.length;e++)f[o.charCodeAt(e)]=e;function t(e){for(var t=e.length;0<=--t;)e[t]=0}t(new Array(576));var n=new Array(60),n=(t(n),new Array(512)),n=(t(n),new Array(256)),n=(t(n),new Array(29)),n=(t(n),new Array(30)),ge=(t(n),function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;a=a+(i=i+t[r++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}),F=new Uint32Array((()=>{for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e})()),ie=function(e,t,n,r){var i=F,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},j={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},n={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},V=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!==s(i))throw new TypeError(i+"must be non-object");for(var a in i)t=i,n=a,Object.prototype.hasOwnProperty.call(t,n)&&(e[a]=i[a])}}return e},M=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),a=0,s=0,o=e.length;a<o;a++){var c=e[a];i.set(c,s),s+=c.length}return i},Z=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Z=!1}for(var h=new Uint8Array(256),r=0;r<256;r++)h[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;h[254]=h[254]=1;var B=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,n,r,i,a=e.length,s=0,o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=i=0;i<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[i++]=n:(n<2048?t[i++]=192|n>>>6:(n<65536?t[i++]=224|n>>>12:(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63),t[i++]=128|n>>>6&63),t[i++]=128|63&n);return t},z=function(e,t){var n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));for(var r=new Array(2*n),i=0,a=0;a<n;){var s=e[a++];if(s<128)r[i++]=s;else{var o=h[s];if(4<o)r[i++]=65533,a+=o-1;else{for(s&=2===o?31:3===o?15:7;1<o&&a<n;)s=s<<6|63&e[a++],o--;1<o?r[i++]=65533:s<65536?r[i++]=s:(s-=65536,r[i++]=55296|s>>10&1023,r[i++]=56320|1023&s)}}}var c=r,u=i;if(u<65534&&c.subarray&&Z)return String.fromCharCode.apply(null,c.length===u?c:c.subarray(0,u));for(var l="",f=0;f<u;f++)l+=String.fromCharCode(c[f]);return l},q=function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0)&&0!==n&&n+h[e[n]]>t?n:t};function pe(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}var G=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ae=16209,me=16191,K=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),W=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),H=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),J=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),se=function(e,t,n,r,i,a,s,o){for(var c,u,l,f,h,d,g,p,m,v=o.bits,y=0,b=0,k=0,w=0,C=0,I=0,S=0,_=0,T=0,A=0,x=null,E=new Uint16Array(16),D=new Uint16Array(16),U=null,y=0;y<=15;y++)E[y]=0;for(b=0;b<r;b++)E[t[n+b]]++;for(C=v,w=15;1<=w&&0===E[w];w--);if(w<C&&(C=w),0===w)i[a++]=20971520,i[a++]=20971520,o.bits=1;else{for(k=1;k<w&&0===E[k];k++);for(C<k&&(C=k),y=_=1;y<=15;y++)if((_=(_<<=1)-E[y])<0)return-1;if(0<_&&(0===e||1!==w))return-1;for(D[1]=0,y=1;y<15;y++)D[y+1]=D[y]+E[y];for(b=0;b<r;b++)0!==t[n+b]&&(s[D[t[n+b]]++]=b);if(d=0===e?(x=U=s,20):1===e?(x=K,U=W,257):(x=H,U=J,0),y=k,h=a,S=b=A=0,l=-1,f=(T=1<<(I=C))-1,1===e&&852<T||2===e&&592<T)return 1;for(;;){for(m=s[b]+1<d?(p=0,s[b]):s[b]>=d?(p=U[s[b]-d],x[s[b]-d]):(p=96,0),c=1<<(g=y-S),k=u=1<<I;i[h+(A>>S)+(u-=c)]=g<<24|p<<16|m|0,0!==u;);for(c=1<<y-1;A&c;)c>>=1;if(A=0!==c?(A&c-1)+c:0,b++,0==--E[y]){if(y===w)break;y=t[n+s[b]]}if(C<y&&(A&f)!==l){for(h+=k,_=1<<(I=y-(S=0===S?C:S));I+S<w&&!((_-=E[I+S])<=0);)I++,_<<=1;if(T+=1<<I,1===e&&852<T||2===e&&592<T)return 1;i[l=A&f]=C<<24|I<<16|h-a|0}}0!==A&&(i[h+A]=y-S<<24|64<<16|0),o.bits=C}return 0},ve=1,ye=2,be=n.Z_FINISH,ke=n.Z_BLOCK,oe=n.Z_TREES,ce=n.Z_OK,we=n.Z_STREAM_END,Ce=n.Z_NEED_DICT,ue=n.Z_STREAM_ERROR,Ie=n.Z_DATA_ERROR,Se=n.Z_MEM_ERROR,_e=n.Z_BUF_ERROR,Te=n.Z_DEFLATED,le=16180,Ae=16190,fe=16191,xe=16199,Ee=16200,he=16209,X=16211,Y=852,$=592;function Q(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ee(e){var t;return de(e)?ue:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=le,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Y),t.distcode=t.distdyn=new Int32Array($),t.sane=1,t.back=-1,ce)}function te(e){var t;return de(e)?ue:((t=e.state).wsize=0,t.whave=0,t.wnext=0,ee(e))}function ne(e,t){var n;return e?(n=new Q,(e.state=n).strm=e,n.window=null,n.mode=le,(n=re(e,t))!==ce&&(e.state=null),n):ue}function De(e,t,n,r){var i;return null===(e=e.state).window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new Uint8Array(e.wsize)),e.wsize<=r?(e.window.set(t.subarray(n-e.wsize,n),0),e.wnext=0,e.whave=e.wsize):(r<(i=e.wsize-e.wnext)&&(i=r),e.window.set(t.subarray(n-r,n-r+i),e.wnext),(r-=i)?(e.window.set(t.subarray(n-r,n),0),e.wnext=r,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}var Ue,Pe,de=function(e){var t;return!e||!(t=e.state)||t.strm!==e||t.mode<le||t.mode>X?1:0},re=function(e,t){var n,r;return de(e)||(r=e.state,t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?ue:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,te(e))},Le=!0,g={inflateReset:te,inflateReset2:re,inflateResetKeep:ee,inflateInit:function(e){return ne(e,15)},inflateInit2:ne,inflate:function(e,R){var t,n,F,r,i,a,s,o,c,j,u,l,V,M,f,h,d,g,Z,B,p,m,v,y,b=0,k=new Uint8Array(4),z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(de(e)||!e.output||!e.input&&0!==e.avail_in)return ue;(t=e.state).mode===fe&&(t.mode=16192),i=e.next_out,F=e.output,r=e.next_in,n=e.input,o=t.hold,c=t.bits,j=a=e.avail_in,u=s=e.avail_out,m=ce;e:for(;;)switch(t.mode){case le:if(0===t.wrap)t.mode=16192;else{for(;c<16;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}2&t.wrap&&35615===o?(0===t.wbits&&(t.wbits=15),k[t.check=0]=255&o,k[1]=o>>>8&255,t.check=ie(t.check,k,2,0),c=o=0,t.mode=16181):(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31?(e.msg="incorrect header check",t.mode=he):(15&o)!==Te?(e.msg="unknown compression method",t.mode=he):(c-=4,p=8+(15&(o>>>=4)),0===t.wbits&&(t.wbits=p),15<p||p>t.wbits?(e.msg="invalid window size",t.mode=he):(t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&o?16189:fe,c=o=0)))}break;case 16181:for(;c<16;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(t.flags=o,(255&t.flags)!==Te){e.msg="unknown compression method",t.mode=he;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=he;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&4&t.wrap&&(k[0]=255&o,k[1]=o>>>8&255,t.check=ie(t.check,k,2,0)),c=o=0,t.mode=16182;case 16182:for(;c<32;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.head&&(t.head.time=o),512&t.flags&&4&t.wrap&&(k[0]=255&o,k[1]=o>>>8&255,k[2]=o>>>16&255,k[3]=o>>>24&255,t.check=ie(t.check,k,4,0)),c=o=0,t.mode=16183;case 16183:for(;c<16;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&4&t.wrap&&(k[0]=255&o,k[1]=o>>>8&255,t.check=ie(t.check,k,2,0)),c=o=0,t.mode=16184;case 16184:if(1024&t.flags){for(;c<16;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&4&t.wrap&&(k[0]=255&o,k[1]=o>>>8&255,t.check=ie(t.check,k,2,0)),c=o=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&((l=a<(l=t.length)?a:l)&&(t.head&&(p=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+l),p)),512&t.flags&&4&t.wrap&&(t.check=ie(t.check,n,l,r)),a-=l,r+=l,t.length-=l),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(0===a)break e;for(l=0;p=n[r+l++],t.head&&p&&t.length<65536&&(t.head.name+=String.fromCharCode(p)),p&&l<a;);if(512&t.flags&&4&t.wrap&&(t.check=ie(t.check,n,l,r)),a-=l,r+=l,p)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(0===a)break e;for(l=0;p=n[r+l++],t.head&&p&&t.length<65536&&(t.head.comment+=String.fromCharCode(p)),p&&l<a;);if(512&t.flags&&4&t.wrap&&(t.check=ie(t.check,n,l,r)),a-=l,r+=l,p)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;c<16;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(4&t.wrap&&o!==(65535&t.check)){e.msg="header crc mismatch",t.mode=he;break}c=o=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=fe;break;case 16189:for(;c<32;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}e.adler=t.check=pe(o),c=o=0,t.mode=Ae;case Ae:if(0===t.havedict)return e.next_out=i,e.avail_out=s,e.next_in=r,e.avail_in=a,t.hold=o,t.bits=c,Ce;e.adler=t.check=1,t.mode=fe;case fe:if(R===ke||R===oe)break e;case 16192:if(t.last)o>>>=7&c,c-=7&c,t.mode=16206;else{for(;c<3;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}switch(t.last=1&o,--c,3&(o>>>=1)){case 0:t.mode=16193;break;case 1:C=w=void 0;var w=t;if(Le){Ue=new Int32Array(512),Pe=new Int32Array(32);for(var C=0;C<144;)w.lens[C++]=8;for(;C<256;)w.lens[C++]=9;for(;C<280;)w.lens[C++]=7;for(;C<288;)w.lens[C++]=8;for(se(ve,w.lens,0,288,Ue,0,w.work,{bits:9}),C=0;C<32;)w.lens[C++]=5;se(ye,w.lens,0,32,Pe,0,w.work,{bits:5}),Le=!1}if(w.lencode=Ue,w.lenbits=9,w.distcode=Pe,w.distbits=5,t.mode=xe,R!==oe)break;o>>>=2,c-=2;break e;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=he}o>>>=2,c-=2}break;case 16193:for(o>>>=7&c,c-=7&c;c<32;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if((65535&o)!=(o>>>16^65535)){e.msg="invalid stored block lengths",t.mode=he;break}if(t.length=65535&o,c=o=0,t.mode=16194,R===oe)break e;case 16194:t.mode=16195;case 16195:if(l=t.length){if(0===(l=s<(l=a<l?a:l)?s:l))break e;F.set(n.subarray(r,r+l),i),a-=l,r+=l,s-=l,i+=l,t.length-=l}else t.mode=fe;break;case 16196:for(;c<14;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(t.nlen=257+(31&o),o>>>=5,c-=5,t.ndist=1+(31&o),o>>>=5,c-=5,t.ncode=4+(15&o),o>>>=4,c-=4,286<t.nlen||30<t.ndist){e.msg="too many length or distance symbols",t.mode=he;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;c<3;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.lens[z[t.have++]]=7&o,o>>>=3,c-=3}for(;t.have<19;)t.lens[z[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,v={bits:t.lenbits},m=se(0,t.lens,0,19,t.lencode,0,t.work,v),t.lenbits=v.bits,m){e.msg="invalid code lengths set",t.mode=he;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;h=(b=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,d=65535&b,!((f=b>>>24)<=c);){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(d<16)o>>>=f,c-=f,t.lens[t.have++]=d;else{if(16===d){for(y=f+2;c<y;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(o>>>=f,c-=f,0===t.have){e.msg="invalid bit length repeat",t.mode=he;break}p=t.lens[t.have-1],l=3+(3&o),o>>>=2,c-=2}else if(17===d){for(y=f+3;c<y;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}p=0,l=3+(7&(o>>>=f)),o>>>=3,c=c-f-3}else{for(y=f+7;c<y;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}p=0,l=11+(127&(o>>>=f)),o>>>=7,c=c-f-7}if(t.have+l>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=he;break}for(;l--;)t.lens[t.have++]=p}}if(t.mode===he)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=he;break}if(t.lenbits=9,v={bits:t.lenbits},m=se(ve,t.lens,0,t.nlen,t.lencode,0,t.work,v),t.lenbits=v.bits,m){e.msg="invalid literal/lengths set",t.mode=he;break}if(t.distbits=6,t.distcode=t.distdyn,v={bits:t.distbits},m=se(ye,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,v),t.distbits=v.bits,m){e.msg="invalid distances set",t.mode=he;break}if(t.mode=xe,R===oe)break e;case xe:t.mode=Ee;case Ee:if(6<=a&&258<=s){e.next_out=i,e.avail_out=s,e.next_in=r,e.avail_in=a,t.hold=o,t.bits=c,D=L=G=x=A=T=_=S=I=re=ne=te=ee=N=O=Q=$=Y=X=J=H=W=P=K=U=q=E=void 0;var I,S,_,T,A,x,E=e,q=u,D=E.state,U=E.next_in,G=E.input,K=U+(E.avail_in-5),P=E.next_out,L=E.output,W=P-(q-E.avail_out),H=P+(E.avail_out-257),J=D.dmax,X=D.wsize,Y=D.whave,$=D.wnext,Q=D.window,O=D.hold,N=D.bits,ee=D.lencode,te=D.distcode,ne=(1<<D.lenbits)-1,re=(1<<D.distbits)-1;t:do{for(N<15&&(O+=G[U++]<<N,N+=8,O+=G[U++]<<N,N+=8),I=ee[O&ne];;){if(O>>>=S=I>>>24,N-=S,0===(S=I>>>16&255))L[P++]=65535&I;else{if(!(16&S)){if(0==(64&S)){I=ee[(65535&I)+(O&(1<<S)-1)];continue}if(32&S){D.mode=me;break t}E.msg="invalid literal/length code",D.mode=ae;break t}for(_=65535&I,(S&=15)&&(N<S&&(O+=G[U++]<<N,N+=8),_+=O&(1<<S)-1,O>>>=S,N-=S),N<15&&(O+=G[U++]<<N,N+=8,O+=G[U++]<<N,N+=8),I=te[O&re];;){if(O>>>=S=I>>>24,N-=S,!(16&(S=I>>>16&255))){if(0==(64&S)){I=te[(65535&I)+(O&(1<<S)-1)];continue}E.msg="invalid distance code",D.mode=ae;break t}if(T=65535&I,N<(S&=15)&&(O+=G[U++]<<N,(N+=8)<S)&&(O+=G[U++]<<N,N+=8),J<(T+=O&(1<<S)-1)){E.msg="invalid distance too far back",D.mode=ae;break t}if(O>>>=S,N-=S,(S=P-W)<T){if(Y<(S=T-S)&&D.sane){E.msg="invalid distance too far back",D.mode=ae;break t}if(x=Q,(A=0)===$){if(A+=X-S,S<_){for(_-=S;L[P++]=Q[A++],--S;);A=P-T,x=L}}else if($<S){if(A+=X+$-S,(S-=$)<_){for(_-=S;L[P++]=Q[A++],--S;);if(A=0,$<_){for(_-=S=$;L[P++]=Q[A++],--S;);A=P-T,x=L}}}else if(A+=$-S,S<_){for(_-=S;L[P++]=Q[A++],--S;);A=P-T,x=L}for(;2<_;)L[P++]=x[A++],L[P++]=x[A++],L[P++]=x[A++],_-=3;_&&(L[P++]=x[A++],1<_)&&(L[P++]=x[A++])}else{for(A=P-T;L[P++]=L[A++],L[P++]=L[A++],L[P++]=L[A++],2<(_-=3););_&&(L[P++]=L[A++],1<_)&&(L[P++]=L[A++])}break}}break}}while(U<K&&P<H);O&=(1<<(N-=(_=N>>3)<<3))-1,E.next_in=U-=_,E.next_out=P,E.avail_in=U<K?K-U+5:5-(U-K),E.avail_out=P<H?H-P+257:257-(P-H),D.hold=O,D.bits=N,i=e.next_out,F=e.output,s=e.avail_out,r=e.next_in,n=e.input,a=e.avail_in,o=t.hold,c=t.bits,t.mode===fe&&(t.back=-1);break}for(t.back=0;h=(b=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,d=65535&b,!((f=b>>>24)<=c);){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(h&&0==(240&h)){for(g=f,Z=h,B=d;h=(b=t.lencode[B+((o&(1<<g+Z)-1)>>g)])>>>16&255,d=65535&b,!(g+(f=b>>>24)<=c);){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}o>>>=g,c-=g,t.back+=g}if(o>>>=f,c-=f,t.back+=f,t.length=d,0===h){t.mode=16205;break}if(32&h){t.back=-1,t.mode=fe;break}if(64&h){e.msg="invalid literal/length code",t.mode=he;break}t.extra=15&h,t.mode=16201;case 16201:if(t.extra){for(y=t.extra;c<y;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;h=(b=t.distcode[o&(1<<t.distbits)-1])>>>16&255,d=65535&b,!((f=b>>>24)<=c);){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(0==(240&h)){for(g=f,Z=h,B=d;h=(b=t.distcode[B+((o&(1<<g+Z)-1)>>g)])>>>16&255,d=65535&b,!(g+(f=b>>>24)<=c);){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}o>>>=g,c-=g,t.back+=g}if(o>>>=f,c-=f,t.back+=f,64&h){e.msg="invalid distance code",t.mode=he;break}t.offset=d,t.extra=15&h,t.mode=16203;case 16203:if(t.extra){for(y=t.extra;c<y;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=he;break}t.mode=16204;case 16204:if(0===s)break e;if(t.offset>(l=u-s)){if((l=t.offset-l)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=he;break}V=l>t.wnext?(l-=t.wnext,t.wsize-l):t.wnext-l,l>t.length&&(l=t.length),M=t.window}else M=F,V=i-t.offset,l=t.length;for(s-=l=s<l?s:l,t.length-=l;F[i++]=M[V++],--l;);0===t.length&&(t.mode=Ee);break;case 16205:if(0===s)break e;F[i++]=t.length,s--,t.mode=Ee;break;case 16206:if(t.wrap){for(;c<32;){if(0===a)break e;a--,o|=n[r++]<<c,c+=8}if(u-=s,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=(t.flags?ie:ge)(t.check,F,u,i-u)),u=s,4&t.wrap&&(t.flags?o:pe(o))!==t.check){e.msg="incorrect data check",t.mode=he;break}c=o=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;c<32;){if(0===a)break e;a--,o+=n[r++]<<c,c+=8}if(4&t.wrap&&o!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=he;break}c=o=0}t.mode=16208;case 16208:m=we;break e;case he:m=Ie;break e;case 16210:return Se;default:return ue}return e.next_out=i,e.avail_out=s,e.next_in=r,e.avail_in=a,t.hold=o,t.bits=c,(t.wsize||u!==e.avail_out&&t.mode<he&&(t.mode<16206||R!==be))&&De(e,e.output,e.next_out,u-e.avail_out),u-=e.avail_out,e.total_in+=j-=e.avail_in,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=(t.flags?ie:ge)(t.check,F,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===fe?128:0)+(t.mode===xe||16194===t.mode?256:0),m=(0==j&&0===u||R===be)&&m===ce?_e:m},inflateEnd:function(e){var t;return de(e)?ue:((t=e.state).window&&(t.window=null),e.state=null,ce)},inflateGetHeader:function(e,t){return de(e)||0==(2&(e=e.state).wrap)?ue:((e.head=t).done=!1,ce)},inflateSetDictionary:function(e,t){var n,r=t.length;return de(e)||0!==(n=e.state).wrap&&n.mode!==Ae?ue:n.mode===Ae&&ge(1,t,r,0)!==n.check?Ie:De(e,t,r,r)?(n.mode=16210,Se):(n.havedict=1,ce)},inflateInfo:"pako inflate (from Nodeca project)"};var Oe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Ne=Object.prototype.toString,Re=n.Z_NO_FLUSH,Fe=n.Z_FINISH,p=n.Z_OK,je=n.Z_STREAM_END,Ve=n.Z_NEED_DICT,Me=n.Z_STREAM_ERROR,Ze=n.Z_DATA_ERROR,Be=n.Z_MEM_ERROR;function i(e){this.options=V({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new G,this.strm.avail_out=0,g.inflateInit2(this.strm,t.windowBits));if(e!==p)throw new Error(j[e]);if(this.header=new Oe,g.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=B(t.dictionary):"[object ArrayBuffer]"===Ne.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(e=g.inflateSetDictionary(this.strm,t.dictionary))!==p)throw new Error(j[e])}function ze(e,t){t=new i(t);if(t.push(e),t.err)throw t.msg||j[t.err];return t.result}i.prototype.push=function(e,t){var n,r,i=this.strm,a=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Fe:Re,"[object ArrayBuffer]"===Ne.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(n=g.inflate(i,r))===Ve&&s&&((n=g.inflateSetDictionary(i,s))===p?n=g.inflate(i,r):n===Ze&&(n=Ve));0<i.avail_in&&n===je&&0<i.state.wrap&&0!==e[i.next_in];)g.inflateReset(i),n=g.inflate(i,r);switch(n){case Me:case Ze:case Ve:case Be:return this.onEnd(n),!(this.ended=!0)}var o,c,u,l=i.avail_out;if(!i.next_out||0!==i.avail_out&&n!==je||("string"===this.options.to?(o=q(i.output,i.next_out),c=i.next_out-o,u=z(i.output,o),i.next_out=c,i.avail_out=a-c,c&&i.output.set(i.output.subarray(o,o+c),0),this.onData(u)):this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out))),n!==p||0!==l){if(n===je)return n=g.inflateEnd(this.strm),this.onEnd(n),this.ended=!0;if(0===i.avail_in)break}}return!0},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=M(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var qe={Inflate:i,inflate:ze,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ze(e,t)},ungzip:ze,constants:n}.ungzip,m={},n=Array.prototype,Ge=n.slice,a=Object.prototype.toString,Ke=Object.prototype.hasOwnProperty,We=n.forEach,n=Array.isArray,He={};function Je(){return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function Xe(e,t){var n=e.charAt(0),t=t.split(n);return n===e?t:t[(e=parseInt(e.substring(1),10))<0?t.length+e:e-1]}function Ye(e,t){for(var n,r=e.charAt(0),i=t.split("&"),a=[],s={},o=e.substring(1),c=0,u=i.length;c<u;c++)if(""!==(a=(a=i[c].match(/(.*?)=(.*)/))||[i[c],i[c],""])[1].replace(/\s/g,"")){if(a[2]=(n=a[2]||"",m.decodeURIComponent(n.replace(/\+/g," "))),o===a[1])return a[2];(n=a[1].match(/(.*)\[([0-9]+)\]/))?(s[n[1]]=s[n[1]]||[],s[n[1]][n[2]]=a[2]):s[a[1]]=a[2]}return r===e?s:s[o]}m.checkSettings=function(e){if(e&&!m.isStrEmpty(e.appId)&&!m.isStrEmpty(e.serverUrl))return e.appId=m.checkAppId(e.appId),e.serverUrl=m.checkUrl(e.serverUrl),m.isStrEmpty(e.templateCode)&&(e.templateCode=E),e},m.checkAppId=function(e){return e=e.replace(/\s*/g,"")},m.checkUrl=function(e){return e=e.replace(/\s*/g,""),e=m.url("basic",e)},m.url=function(e,t){var n,r={};if("tld?"===e)return Je();if(t=t||window.location.toString(),!e)return t;if(e=e.toString(),t.match(/^mailto:([^/].+)/))n=t.match(/^mailto:([^/].+)/),r.protocol="mailto",r.email=n[1];else{if((t=t.match(/(.*?)\/#!(.*)/)?(n=t.match(/(.*?)\/#!(.*)/))[1]+n[2]:t).match(/(.*?)#(.*)/)&&(n=t.match(/(.*?)#(.*)/),r.hash=n[2],t=n[1]),r.hash&&e.match(/^#/))return Ye(e,r.hash);if(t.match(/(.*?)\?(.*)/)&&(n=t.match(/(.*?)\?(.*)/),r.query=n[2],t=n[1]),r.query&&e.match(/^\?/))return Ye(e,r.query);if(t.match(/(.*?):?\/\/(.*)/)&&(n=t.match(/(.*?):?\/\/(.*)/),r.protocol=n[1].toLowerCase(),t=n[2]),t.match(/(.*?)(\/.*)/)&&(n=t.match(/(.*?)(\/.*)/),r.path=n[2],t=n[1]),r.path=(r.path||"").replace(/^([^/])/,"/$1").replace(/\/$/,""),(e=e.match(/^[-0-9]+$/)?e.replace(/^([^/])/,"/$1"):e).match(/^\//))return Xe(e,r.path.substring(1));if((n=(n=Xe("/-1",r.path.substring(1)))&&n.match(/(.*?)\.(.*)/))&&(r.file=n[0],r.filename=n[1],r.fileext=n[2]),t.match(/(.*):([0-9]+)$/)&&(n=t.match(/(.*):([0-9]+)$/),r.port=n[2],t=n[1]),t.match(/(.*?)@(.*)/)&&(n=t.match(/(.*?)@(.*)/),r.auth=n[1],t=n[2]),r.auth&&(n=r.auth.match(/(.*):(.*)/),r.user=n?n[1]:r.auth,r.pass=n?n[2]:void 0),r.hostname=t.toLowerCase(),"."===e.charAt(0))return Xe(e,r.hostname);Je()&&(n=r.hostname.match(Je()))&&(r.tld=n[3],r.domain=n[2]?n[2]+"."+n[3]:void 0,r.sub=n[1]||void 0);t=r.port?":"+r.port:"";r.protocol=r.protocol||window.location.protocol.replace(":",""),r.port=r.port||("https"===r.protocol?"443":"80"),r.protocol=r.protocol||("443"===r.port?"https":"http"),r.basic=r.protocol+"://"+r.hostname+t}return e in r?r[e]:"{}"===e?r:""},m.isStrEmpty=function(e){return!e||0===e.length},m.isArray=n||function(e){return"[object Array]"===a.call(e)},m.UUID=function(){var e=Date.now();return String(Math.random()).replace(".","").slice(1,11)+"-"+e},m.each=function(e,t,n){if(null==e)return!1;if(We&&e.forEach===We)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e)===He)return!1}else for(var a in e)if(Ke.call(e,a)&&t.call(n,e[a],a,e)===He)return!1},m.extend=function(n){return m.each(Ge.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(n[t]=e[t])}),n},m.extend1=function(n){return m.each(Ge.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(n[t.toLowerCase()]=e[t])}),n},m.hexToArrayBuffer=function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)})).buffer},m.sign=function(e,t){for(var e=m.sha256(e+t+"thinkingdata-remote-config"),t=m.hexToArrayBuffer(e),n=new Uint8Array(t),r=n.length,i="",a=0;a<r;a+=3)i=(i=(i=(i+=o[n[a]>>2])+o[(3&n[a])<<4|n[a+1]>>4])+o[(15&n[a+1])<<2|n[a+2]>>6])+o[63&n[a+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},m.sha256=function(e){function v(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function y(e,t){return e>>>t|e<<32-t}for(var t=((e,t)=>{var n,r=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),a=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var s,o=0;o<e.length;o+=16){for(var c=i[0],u=i[1],l=i[2],f=i[3],h=i[4],d=i[5],g=i[6],p=i[7],m=0;m<64;m++)a[m]=m<16?e[m+o]:v(v(v(y(s=a[m-2],17)^y(s,19)^s>>>10,a[m-7]),y(s=a[m-15],7)^y(s,18)^s>>>3),a[m-16]),s=v(v(v(v(p,y(h,6)^y(h,11)^y(h,25)),h&d^~h&g),r[m]),a[m]),n=v(y(c,2)^y(c,13)^y(c,22),c&u^c&l^u&l),p=g,g=d,d=h,h=v(f,s),f=l,l=u,u=c,c=v(s,n);i[0]=v(c,i[0]),i[1]=v(u,i[1]),i[2]=v(l,i[2]),i[3]=v(f,i[3]),i[4]=v(h,i[4]),i[5]=v(d,i[5]),i[6]=v(g,i[6]),i[7]=v(p,i[7])}return i})((e=>{for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t})(e=(e=>{e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):t=127<r&&r<2048?(t+=String.fromCharCode(r>>6|192))+String.fromCharCode(63&r|128):(t=(t+=String.fromCharCode(r>>12|224))+String.fromCharCode(r>>6&63|128))+String.fromCharCode(63&r|128)}return t})(e)),8*e.length),n="0123456789abcdef",r="",i=0;i<4*t.length;i++)r+=n.charAt(t[i>>2]>>8*(3-i%4)+4&15)+n.charAt(t[i>>2]>>8*(3-i%4)&15);return r},m.parseJsonConfig=function(n,e){n&&e&&m.each(e,function(e,t){e===O&&(e=n[t])&&(n[t]=new Date(e))})},m.isDate=function(e){return"[object Date]"===a.call(e)},m.isString=function(e){return"[object String]"===a.call(e)},m.isBoolean=function(e){return"[object Boolean]"===a.call(e)},m.isNumber=function(e){return"[object Number]"===a.call(e)&&/[\d\.]+/.test(String(e))},m.isObject=function(e){return"[object Object]"===a.call(e)&&null!=e},m.isFunction=function(e){try{return"function"==typeof e}catch(e){return!1}},m.stringToBoolean=function(e){switch(e.toLowerCase().trim()){case"true":return!0;case"false":return!1;default:return}},m.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+((e=e.getMilliseconds())<100&&9<e?"0"+e:e<10?"00"+e:e)},m.parseConfigToJson=function(e){var n,r;return e?(n={},r={},m.each(e,function(e,t){m.isDate(e)?(n[t]=m.formatDate(e),r[t]=O):n[t]=e}),{config:n,type:r}):{}},m.isDebug=function(e){return"debug"===e||"debugOnly"===e},m.parseResponse=function(e){var t=e.data;if(t.data){var e=e.header,n=e.Timestamp||e.timestamp;if((e.Sign||e.sign)!==m.sign(n,t.data))return{code:R,msg:"sign illegal"};t.timeStamp=Number(n);e=(e=>{for(var t,n,r,i,a=.75*e.length,s=e.length,o=0,a=("="===e[e.length-1]&&(a--,"="===e[e.length-2])&&a--,new ArrayBuffer(a)),c=new Uint8Array(a),u=0;u<s;u+=4)t=f[e.charCodeAt(u)],n=f[e.charCodeAt(u+1)],r=f[e.charCodeAt(u+2)],i=f[e.charCodeAt(u+3)],c[o++]=t<<2|n>>4,c[o++]=(15&n)<<4|r>>2,c[o++]=(3&r)<<6|63&i;return a})(t.data),n=qe(e),e=m.arrayBufferToString(n);t.data=JSON.parse(e)}return t},m.arrayBufferToString=function(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;){var i,a,s=t[r];s<128?(n+=String.fromCharCode(s),r+=1):192<=s&&s<224?(i=t[r+1],n+=String.fromCharCode((31&s)<<6|63&i),r+=2):224<=s&&s<240?(i=t[r+1],a=t[r+2],n+=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a),r+=3):240<=s&&s<248&&(a=(7&s)<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],a-=65536,n+=String.fromCharCode(55296+(a>>10),56320+(1023&a)),r+=4)}return n},m.paramType=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},m.addEvent=function(e,t,n,r){if(document.addEventListener)if("Array"!==this.paramType(e)&&"HTMLCollection"!==this.paramType(e)||!e.length||e===window)e.addEventListener(t,n,r);else for(var i=0;i<e.length;i++)this.addEvent(e[i],t,n,r);else if(e.length&&e!==window)for(var a=0;a<e.length;a++)this.addEvent(e[a],t,n);else e.attachEvent("on"+t,function(){return n.call(e,window.event)})},m.isCCAndroid=function(){return!(!cc.sys.isNative||"Android"!==cc.sys.os)},m.isCCIOS=function(){return!(!cc.sys.isNative||"iOS"!==cc.sys.os)};var v="object"===s(void 0)?void 0:{},$e=(v.info=function(){if("object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&v.enabled)try{return arguments[0]="[ThinkingData] Info: "+arguments[0],v.listener&&v.listener(arguments[0]),console.log.apply(console,arguments)}catch(e){v.listener&&v.listener(arguments[0]),console.log("[ThinkingData] Info: "+arguments[0])}},v.info1=function(e,t){v.enabled&&(v.listener&&v.listener(e+JSON.stringify(t)),v.info(e+JSON.stringify(t,null,4)))},v.warn=function(){if("object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&v.enabled)try{return arguments[0]="[ThinkingData] Warning: "+arguments[0],console.warn.apply(console,arguments)}catch(e){console.warn("[ThinkingData] Warning: "+arguments[0])}},(()=>{function r(e){u(this,r),this.keyList=[],e&&(this.configValues=e.first,this.defaultValues=e.second)}return l(r,[{key:"get",value:function(e,t){return void 0!==this.configValues&&(this.keyList.push(e),m.isString(e)&&m.isObject(this.configValues)||m.isNumber(e)&&m.isArray(this.configValues)?this.configValues=this.configValues[e]:this.configValues=t,void 0===this.configValues&&this.keyList.length<=2&&(this.configValues=this.getDefaultValue(),this.defaultValues=void 0),void 0===this.configValues)&&(this.configValues=t),this}},{key:"getDefaultValue",value:function(){if(void 0!==this.defaultValues){for(var e=this.defaultValues,t=0;t<this.keyList.length;t++)if(void 0===(e=e[this.keyList[t]]))break;return e}}},{key:"arrayWithFilter",value:function(e){if(m.isFunction(e)&&void 0!==this.configValues)if(m.isArray(this.configValues)){for(var t=[],n=0;n<this.configValues.length;n++)!0===e(new r({first:this.configValues[n]}))&&t.push(this.configValues[n]);this.configValues=t}else this.configValues=void 0;return this}},{key:"stringValue",value:function(){if(void 0!==this.configValues)return m.isString(this.configValues)?this.configValues:String(this.configValues)}},{key:"numberValue",value:function(){if(void 0!==this.configValues){if(m.isNumber(this.configValues))return this.configValues;if(m.isString(this.configValues)){var e=Number(this.configValues);if(!Number.isNaN(e))return e}}}},{key:"booleanValue",value:function(){if(void 0!==this.configValues)return m.isBoolean(this.configValues)?this.configValues:m.isString(this.configValues)?m.stringToBoolean(this.configValues):void 0}},{key:"objectValue",value:function(){if(void 0!==this.configValues){if(m.isObject(this.configValues))return this.configValues;if(m.isString(this.configValues)){var e=JSON.parse(this.configValues);if(m.isObject(e))return e}}}},{key:"arrayValue",value:function(){if(void 0!==this.configValues){if(m.isArray(this.configValues))return this.configValues;if(m.isString(this.configValues)){var e=JSON.parse(this.configValues);if(m.isArray(e))return e}}}}])})()),n=(s=>{var c,e=Object.prototype,u=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function o(e,t,n,r){var i,a,s,o,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),r=new T(r||[]);return l(t,"_invoke",{value:(i=e,a=n,s=r,o=h,function(e,t){if(o===g)throw new Error("Generator is already running");if(o===p){if("throw"===e)throw t;return{value:c,done:!0}}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){n=function e(t,n){var r=n.method;var i=t.iterator[r];if(i===c)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;r=f(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;i=r.arg;if(!i)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m;{if(!i.done)return i;n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c)}n.delegate=null;return m}(n,s);if(n){if(n===m)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===h)throw o=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=g;n=f(i,a,s);if("normal"===n.type){if(o=s.done?p:d,n.arg!==m)return{value:n.arg,done:s.done}}else"throw"===n.type&&(o=p,s.method="throw",s.arg=n.arg)}})}),t}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}s.wrap=o;var h="suspendedStart",d="suspendedYield",g="executing",p="completed",m={};function v(){}function y(){}function b(){}a(t={},r,function(){return this});var k=Object.getPrototypeOf,w=((k=k&&k(k(A([]))))&&k!==e&&u.call(k,r)&&(t=k),b.prototype=v.prototype=Object.create(t));function C(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function I(s,o){var t;l(this,"_invoke",{value:function(n,r){function e(){return new o(function(e,t){!function t(e,n,r,i){var a,e=f(s[e],s,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==typeof n&&u.call(n,"__await")?o.resolve(n.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):o.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)});i(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(t){if(null!=t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e}).next=e}throw new TypeError(typeof t+" is not iterable")}return l(w,"constructor",{value:y.prototype=b,configurable:!0}),l(b,"constructor",{value:y,configurable:!0}),y.displayName=a(b,i,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a(e,i,"GeneratorFunction")),e.prototype=Object.create(w),e},s.awrap=function(e){return{__await:e}},C(I.prototype),a(I.prototype,n,function(){return this}),s.AsyncIterator=I,s.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new I(o(e,t,n,r),i);return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},C(w),a(w,i,"Generator"),a(w,r,function(){return this}),a(w,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=u.call(i,"catchLoc"),o=u.call(i,"finallyLoc");if(s&&o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,_(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),m}},s})("object"==typeof module?module.exports:{});try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis&&(globalThis.regeneratorRuntime=n)}var b="data",Qe=(()=>{function t(e){u(this,t),this.api=e}return l(t,[{key:"openDb",value:function(){return new Promise(function(t,e){var n=indexedDB.open("thinkingdata",1);n.onerror=function(e){t(void 0)},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(e){e.target.result.createObjectStore(b,{keyPath:"id",autoIncrement:!0}).createIndex("key","key",{unique:!0})}})}},{key:"initPageLifeCycle",value:function(e){"onvisibilitychange"in document&&m.addEvent(document,"visibilitychange",function(){e()})}},{key:"setStorage",value:(r=c(d().m(function e(i,a,t){var s=this;return d().w(function(e){for(;;)switch(e.n){case 0:if(this.db){e.n=2;break}return e.n=1,this.openDb();case 1:this.db=e.v;case 2:return e.a(2,new Promise(function(t,e){var n=s.db.transaction(b,"readwrite").objectStore(b),r=n.index("key").get(i);r.onsuccess=function(e){var e=e.target.result;e?(e.value=a,(e=n.put(e)).onsuccess=function(){t(!0)},e.onerror=function(e){t(!1)}):((e=n.add({key:i,value:a})).onsuccess=function(){t(!0)},e.onerror=function(e){t(!1)})},r.onerror=function(e){t(!1)}}))}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"getStorage",value:(n=c(d().m(function e(r,t){var i=this;return d().w(function(e){for(;;)switch(e.n){case 0:if(this.db){e.n=2;break}return e.n=1,this.openDb();case 1:this.db=e.v;case 2:return e.a(2,new Promise(function(t,e){var n=i.db.transaction(b,"readonly").objectStore(b).index("key").get(r);n.onsuccess=function(e){e=e.target.result;t(e?e.value:void 0)},n.onerror=function(e){t(void 0)}}))}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"readFile",value:function(e){return"{}"}},{key:"getStorageSync",value:function(e){return{}}},{key:"request",value:function(n){return new Promise(function(t,e){try{var r=null;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open(n.method,n.url,!0),m.each(n.header,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(){var e,n;r.readyState===XMLHttpRequest.DONE&&(200<=r.status&&r.status<300||304===r.status)&&(e=r.getAllResponseHeaders().trim().split(/[\r\n]+/),n={},e.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");n[t]=e}),t({data:JSON.parse(r.response),header:n}))},n.data?r.send(JSON.stringify(n.data)):r.send()}catch(e){t({data:{code:-10003,msg:"error"},header:{}})}})}},{key:"getSystemInfo",value:function(){var e=this.getAnalyticGlobalData();return e?e.getPresetProperties().toEventPresetProperties():{}}},{key:"isNetWorkConnect",value:function(){return!navigator||navigator.onLine}},{key:"onNetworkStatusChange",value:function(e){this.api.addEventListener("online",function(){e({isConnected:!0})}),this.api.addEventListener("offline",function(){e({isConnected:!1})})}},{key:"getAnalyticGlobalData",value:function(){return this.api.tdanalytics2024}},{key:"setGlobalData",value:function(e){this.api.tdremoteconfig2024=e}}],[{key:"createInstance",value:function(){return new t(window)}}]);var n,r})(),k=(()=>l(function e(){u(this,e)},null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=Qe.createInstance())}},{key:"initPageLifeCycle",value:function(e){return this._getCurrentPlatform().initPageLifeCycle(e)}},{key:"setStorage",value:function(e,t,n){return this._getCurrentPlatform().setStorage(e,t,n)}},{key:"getStorage",value:function(e,t){return this._getCurrentPlatform().getStorage(e,t)}},{key:"readFile",value:function(e){return this._getCurrentPlatform().readFile(e)}},{key:"getStorageSync",value:function(e){return this._getCurrentPlatform().getStorageSync(e)}},{key:"request",value:function(e){return this._getCurrentPlatform().request(e)}},{key:"getSystemInfo",value:function(){return this._getCurrentPlatform().getSystemInfo()}},{key:"isNetWorkConnect",value:function(){return this._getCurrentPlatform().isNetWorkConnect()}},{key:"onNetworkStatusChange",value:function(e){return this._getCurrentPlatform().onNetworkStatusChange(e)}},{key:"getAnalyticGlobalData",value:function(){return this._getCurrentPlatform().getAnalyticGlobalData()}},{key:"setGlobalData",value:function(e){this._getCurrentPlatform().setGlobalData(e)}}]))(),w={},C=k.getAnalyticGlobalData(),et=(w.getCurrentTimeStamp=function(){return Date.now()},w.getCurrentDate=function(){return new Date(Date.now())},w.trackDebugFailEvent=function(e,t){C&&C.trackInternal({eventName:"te_ops_client_debug_test",properties:{"#rcc_pull_result":{business_type:1,is_pull_success:!1,pull_fail_code:t}},debugMode:"debugOnly"},e)},w.trackRiskEvent=function(e){C&&C.trackInternal({eventName:"te_ops_client_risk_record",properties:{"#ops_risk_type":1}},e)},w.getAccountId=function(e){return C?C.getAccountId(e):""},w.getDistinctId=function(e){return C?C.getDistinctId(e):""},w.getDeviceId=function(){return C?C.getDeviceId():""},w.registerAnalyticsObserver=function(e,t){C&&C.registerAnalyticsObserver(e,t)},(()=>{function e(){u(this,e),this.tasks=[],this.timeStamp=0}return l(e,[{key:"addTask",value:function(e,t){var n=function(){return e.apply(this,t)}.bind(this);this.tasks.push(n),this.run()}},{key:"run",value:(t=c(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.n){case 0:if(this.tasks.length<=0)return e.a(2);e.n=1;break;case 1:if(0===this.timeStamp||3e3<w.getCurrentTimeStamp()-this.timeStamp)return this.timeStamp=w.getCurrentTimeStamp(),t=this.tasks.shift(),e.n=2,t();e.n=3;break;case 2:this.timeStamp=0,this.run();case 3:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e.instance=e.instance?e.instance:new e}}]);var t})()),tt=(()=>{function t(e){u(this,t),this.tUsers=e+"_users"}return l(t,[{key:"loadClientUserId",value:function(){et.getInstance().addTask(c(d().m(function e(){var t,n;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.getStorage(this.tUsers,!0);case 1:if(t=e.v,m.isArray(t)&&1e3<t.length)return n=t.length-900,t.splice(0,n),e.n=2,k.setStorage(this.tUsers,t,!0);e.n=2;break;case 2:return e.a(2)}},e,this)})).bind(this))}},{key:"getClientUserId",value:function(u,l,f){et.getInstance().addTask(c(d().m(function e(){var t,n,r,i,a,s,o,c;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.getStorage(this.tUsers,!0);case 1:t=e.v,m.isArray(t)||(t=[]),m.isStrEmpty(u)?(n=this.findUserByDistinctId(t,l))?(f(n.clientUserId),e.n=4):e.n=2:e.n=5;break;case 2:return r=m.UUID(),e.n=3,this.createNewUser(t,"",l,r);case 3:f(r);case 4:e.n=16;break;case 5:for(a=i=void 0,s=0;s<t.length;s++)t[s].accountId===u&&(i=t[s]),t[s].distinctId===l&&(a=t[s]);if(i){e.n=12;break}if(a){e.n=7;break}return o=m.UUID(),e.n=6,this.createNewUser(t,u,l,o);case 6:f(o),e.n=11;break;case 7:if(m.isStrEmpty(a.accountId))return a.accountId=u,e.n=8,k.setStorage(this.tUsers,t,!0);e.n=9;break;case 8:f(a.clientUserId),e.n=11;break;case 9:return c=m.UUID(),e.n=10,this.createNewUser(t,u,"",c);case 10:f(c);case 11:e.n=16;break;case 12:if(a)e.n=15;else{if(m.isStrEmpty(i.distinctId))return i.distinctId=l,e.n=13,k.setStorage(this.tUsers,t,!0);e.n=14}break;case 13:e.n=15;break;case 14:return e.n=15,this.createNewUser(t,i.accountId,l,i.clientUserId);case 15:f(i.clientUserId);case 16:return e.a(2)}},e,this)})).bind(this))}},{key:"findUserByDistinctId",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].distinctId===t)return e[n]}},{key:"findUserByAccountId",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].accountId===t)return e[n]}},{key:"createNewUser",value:(i=c(d().m(function e(t,n,r,i){return d().w(function(e){for(;;)switch(e.n){case 0:return t.push({accountId:n,distinctId:r,clientUserId:i}),e.n=1,k.setStorage(this.tUsers,t,!0);case 1:return e.a(2)}},e,this)})),function(e,t,n,r){return i.apply(this,arguments)})}],[{key:"getInstance",value:function(e){return(t.instanceMaps=t.instanceMaps?t.instanceMaps:{})[e]||(t.instanceMaps[e]=new t(e)),t.instanceMaps[e]}}]);var i})(),I=(()=>{function e(){u(this,e),this.normalTasks=[],this.debugTasks=[],this.callbackList=[],this.controlTimerList={},this.hasRegisterLifeCycle=!1}return l(e,[{key:"addTimerTaskCallBack",value:function(e){this.callbackList.push(e)}},{key:"registerPageLifeCycle",value:function(){var e=this;this.hasRegisterLifeCycle||(k.initPageLifeCycle(function(){e.callTimerTask(3)}),this.hasRegisterLifeCycle=!0)}},{key:"addNewConfigs",value:function(e){"debug"===e.debugMode||"debugOnly"===e.debugMode?this.isTaskExist(this.debugTasks,e.appId,e.templateCode)||(this.debugTasks.push({appId:e.appId,tempCode:e.templateCode,isDebug:!0}),this.startDebugTimerTask()):this.isTaskExist(this.normalTasks,e.appId,e.templateCode)||(this.normalTasks.push({appId:e.appId,tempCode:e.templateCode,isDebug:!1}),this.startNormalTimerTask())}},{key:"startNormalTimerTask",value:function(){var e=this;clearTimeout(this.normalTimer),this.normalTimer=setTimeout(function(){e.callTimerTask(0),e.startNormalTimerTask()},3e4)}},{key:"callTimerTask",value:function(e,t){for(var n=0;n<this.callbackList.length;n++)this.callbackList[n](e,t)}},{key:"startDebugTimerTask",value:function(){var e=this;clearTimeout(this.debuglTimer),this.debuglTimer=setTimeout(function(){e.callTimerTask(1),e.startDebugTimerTask()},5e3)}},{key:"isTaskExist",value:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].appId===t&&e[r].tempCode===n)return!0;return!1}},{key:"removeSystemErrorTask",value:function(t,n){this.debugTasks=this.debugTasks.filter(function(e){return e.appId!==t&&e.tempCode!==n}),this.normalTasks=this.normalTasks.filter(function(e){return e.appId!==t&&e.tempCode!==n}),0===this.debugTasks.length&&clearTimeout(this.debuglTimer),0===this.normalTasks.length&&clearTimeout(this.normalTimer)}},{key:"sendFetchControlDelayTask",value:function(e,t){var n=this;this.controlTimerList[e+t]=setTimeout(function(){n.callTimerTask(2,{appId:e,tempCode:t})},6e4)}},{key:"removeDelayTemplateMessage",value:function(e,t){var n=this.controlTimerList[e+t];clearTimeout(n),this.controlTimerList[e+t]=void 0}},{key:"debugTaskToNormal",value:function(t,n){this.debugTasks=this.debugTasks.filter(function(e){return e.appId!==t&&e.tempCode!==n}),0===this.debugTasks.length&&clearTimeout(this.debuglTimer),this.normalTasks.push({appId:t,tempCode:n,isDebug:!1}),this.startNormalTimerTask()}}],[{key:"getInstance",value:function(){return e.instance=e.instance?e.instance:new e}}])})(),nt=(()=>{return l(function e(t,n){u(this,e),this.config=t,this.appSetting=n,this.customParams={},this.requestControlCount=0,this.lastFetchTime=0,this.mFetchListeners=[],this.defaultConfigKey=this.config.appId+"_"+this.config.templateCode+"_default_configs",this.fetchConfigKey=this.config.appId+"_"+this.config.templateCode+"_fetch_configs",this.tempInfoKey=this.config.appId+"_"+this.config.templateCode+"_infos",this.parseServerUrl(),this.mergeCustomFetchParams(this.config.customFetchParams)},[{key:"initTemplateAsync",value:(r=c(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.getStorage(this.tempInfoKey);case 1:return this.templateInfo=e.v,this.templateInfo||(this.templateInfo={}),e.n=2,k.getStorage(this.defaultConfigKey);case 2:return t=e.v,this.loadDefaultValues(t),e.n=3,k.getStorage(this.fetchConfigKey);case 3:t=e.v,this.loadFetchValues(t);case 4:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"loadDefaultValues",value:function(e){var t;e&&!this.defaultParams&&(t=e.config,e=e.type,t)&&e&&(m.parseJsonConfig(t,e),this.defaultParams={},m.extend(this.defaultParams,t)),this.defaultParams||(this.defaultParams={})}},{key:"loadFetchValues",value:function(e){var t,n;e&&(t=e.config,n=e.type,e.expirationPeriod&&(this.expirationTime=e.expirationPeriod),t)&&n&&(m.parseJsonConfig(t,n),this.applyConfigs||(this.applyConfigs={}),m.extend(this.applyConfigs,t)),this.applyConfigs||(this.applyConfigs={})}},{key:"parseServerUrl",value:function(){m.isDebug(this.config.debugMode)?this.serverUrl=this.config.serverUrl+"/v1/remote-config/debug":this.serverUrl=this.config.serverUrl+"/v1/remote-config/get"}},{key:"getTempCode",value:function(){return this.config.templateCode===E?"":this.config.templateCode}},{key:"getConfigTempCode",value:function(){return this.config.templateCode}},{key:"getServerUrl",value:function(){return this.serverUrl}},{key:"mergeCustomFetchParams",value:function(e){e&&(m.extend(this.customParams,e),v.info1("custom fetch params result :",this.customParams))}},{key:"removeCustomParams",value:function(e){e&&(delete this.customParams[e],v.info1("custom fetch params result :",this.customParams))}},{key:"mergeDefaultParams",value:function(e){var t;e&&(this.defaultParams||(t=k.getStorageSync(this.defaultConfigKey),this.loadDefaultValues(t)),m.extend(this.defaultParams,e),v.info1("default params result :",this.defaultParams),t=m.parseConfigToJson(this.defaultParams),k.setStorage(this.defaultConfigKey,t))}},{key:"clearDefaultParams",value:function(){this.defaultParams={},v.info("clear default params"),k.setStorage(this.defaultConfigKey,{})}},{key:"addConfigFetchListener",value:function(e){this.mFetchListeners.push(e)}},{key:"getCustomParams",value:function(){return this.customParams}},{key:"updateRemoteConfigs",value:(n=c(d().m(function e(t){var n,r,i,a,s,o,c,u;return d().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:if(n=t.data){e.n=2;break}return e.a(2);case 2:if(this.updateLastFetchTime(),this.templateInfo.lastFetchStamp=t.timeStamp,k.setStorage(this.tempInfoKey,this.templateInfo),r=n.config,i=n.type,r&&i){e.n=3;break}return e.a(2);case 3:if(s=n.templateInfo,o=0,s&&(a=s.activationStrategy,o=s.expirationPeriod),(!o||o<=0)&&(o=U),s=w.getCurrentTimeStamp()/1e3+o,o={config:r,type:i,expirationPeriod:s},k.setStorage(this.fetchConfigKey,o),a===P)for(this.expirationTime=s,this.activationSrategy=a,m.parseJsonConfig(r,i),this.applyConfigs||(this.applyConfigs={}),m.extend(this.applyConfigs,r),this.config.remoteconfigObserver&&this.config.remoteconfigObserver("onConfigApplySuccess",{appId:this.config.appId,templateCode:this.getConfigTempCode(),clientUserId:this.appSetting.getClientUserId()}),c={strategy_status_map:r.strategyStatusMap},u=0;u<this.mFetchListeners.length;u++)this.mFetchListeners[u](c);case 4:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"isStrategyNoExpired",value:function(){return this.activationSrategy===L||!this.isExpired()}},{key:"isFetchExpired",value:function(){return 216e5<w.getCurrentTimeStamp()-this.templateInfo.lastFetchStamp}},{key:"isExpired",value:function(){var e;return!!this.expirationTime&&((e=w.getCurrentTimeStamp()/1e3>this.expirationTime)&&v.info("remote config is expired"),e)}},{key:"loadParamsSync",value:function(){var e;this.defaultParams||(e=k.getStorageSync(this.defaultConfigKey),this.loadDefaultValues(e)),this.applyConfigs||(e=k.getStorageSync(this.fetchConfigKey),this.loadFetchValues(e))}},{key:"getAll",value:function(){this.loadParamsSync();var e={second:this.defaultParams};return this.isStrategyNoExpired()&&(e.first=this.applyConfigs),e}},{key:"uploadDebugEvent",value:function(e){!m.isDebug(this.config.debugMode)||this.hasSendDebugEvent||(this.hasSendDebugEvent=!0,w.trackDebugFailEvent(this.config.appId,e))}},{key:"downGradeMode",value:function(){m.isDebug(this.config.debugMode)&&(this.config.debugMode="normal",this.parseServerUrl(),I.getInstance().debugTaskToNormal(this.config.appId,this.getConfigTempCode()))}},{key:"clearOldConfig",value:(e=c(d().m(function e(){return d().w(function(e){for(;;)switch(e.n){case 0:return this.applyConfigs={},e.n=1,k.setStorage(this.fetchConfigKey,{});case 1:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"addRequestCount",value:function(){m.isDebug(this.config.debugMode)||this.requestControlCount++}},{key:"updateLastFetchTime",value:function(){var e;m.isDebug(this.config.debugMode)||((e=w.getCurrentDate().getMinutes())!==this.lastFetchTime&&(this.requestControlCount=1),this.lastFetchTime=e)}},{key:"isRequestControl",value:function(){var e;return!m.isDebug(this.config.debugMode)&&w.getCurrentDate().getMinutes()===this.lastFetchTime&&((e=3<this.requestControlCount)&&(v.info("fetch config too frequently , try again 60s later"),I.getInstance().sendFetchControlDelayTask(this.config.appId,this.config.templateCode)),e)}},{key:"notifyConfigChanged",value:(t=c(d().m(function e(t){var n;return d().w(function(e){for(;;)switch(e.n){case 0:n=(n=t)||this.appSetting.getClientUserId(),this.config.remoteconfigObserver&&this.config.remoteconfigObserver("onConfigChanged",{appId:this.config.appId,templateCode:this.getConfigTempCode(),clientUserId:n});case 1:return e.a(2)}},e,this)})),function(e){return t.apply(this,arguments)})}]);var t,e,n,r})(),rt="td_system_config",it="rcc_client",at=(()=>{function e(){u(this,e),this.loadFlags={},this.systemConfigs=[]}return l(e,[{key:"loadLocalConfig",value:(t=c(d().m(function e(t){var n,r,i;return d().w(function(e){for(;;)switch(e.n){case 0:if(this.isFindAppIdConfig(t.appId))return e.a(2);e.n=1;break;case 1:return e.n=2,k.getStorage(rt);case 2:if(n=e.v,!this.loadFlags[t.appId]){if(m.isArray(n))for(r=0;r<n.length;r++)(i=n[r]).appId===t.appId&&i.plat===it&&this.systemConfigs.push(i);this.loadFlags[t.appId]=!0}this.fetchRemoteSystemConfig(t.appId,t.serverUrl);case 3:return e.a(2)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchRemoteSystemConfig",value:(n=c(d().m(function e(n,t){var r,i,a=this;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.request({url:t+"/v1/remote-config/config?appid="+n,method:"GET"});case 1:if(r=e.v,r=r.data){e.n=2;break}return e.a(2);case 2:return v.info1("Get system config success : ",r),e.n=3,k.getStorage(rt);case 3:return i=e.v,m.isArray(i)||(i=[]),this.systemConfigs=this.systemConfigs.filter(function(e){return e.appId!==n}),i=i.filter(function(e){return e.appId!==n}),m.each(r,function(e,t){e={appId:n,plat:t,disabled:e.disabled,disabledVersionList:e.disabled_version_list};t===it&&a.systemConfigs.push(e),i.push(e)}),e.n=4,k.setStorage(rt,i);case 4:return e.a(2)}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"isFindAppIdConfig",value:function(e){for(var t=0;t<this.systemConfigs.length;t++)if(this.systemConfigs[t].appId===e)return!0;return!1}},{key:"isRCCStop",value:function(e){if(!this.loadFlags[e]){var t=k.getStorageSync(rt);if(m.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.appId===e&&r.plat===it&&this.systemConfigs.push(r)}0<this.systemConfigs.length&&(this.loadFlags[e]=!0)}for(var i=0;i<this.systemConfigs.length;i++){var a=this.systemConfigs[i];if(a.appId===e){if(a.disabled)return!0;for(var s=0;s<a.disabledVersionList.length;s++)if(a.disabledVersionList[i]===x)return!0}}return!1}}],[{key:"getInstance",value:function(){return e.instance=e.instance?e.instance:new e}}]);var n,t})(),st=(()=>{return l(function e(t){u(this,e),this.appId=t.appId,this.templateSettings={},this.tUsers=this.appId+"_users",this.localUserKey=this.appId+"_localUser",this.addTemplateCode(t)},[{key:"initAsync",value:(i=c(d().m(function e(t){var n;return d().w(function(e){for(;;)switch(e.n){case 0:return tt.getInstance(this.appId).loadClientUserId(),e.n=1,this.getClientUserIdAsync(this.getAccountId(),this.getDistinctId());case 1:if(this.clientUserId=e.v,n=this.getTemplateSetting(t))return e.n=2,n.initTemplateAsync();e.n=2;break;case 2:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getTemplateSetting",value:function(e){if(!at.getInstance().isRCCStop(this.appId))return m.isStrEmpty(e)?this.templateSettings[E]:this.templateSettings[e]}},{key:"addTemplateCode",value:function(e){var t;return!this.templateSettings[e.templateCode]&&(t=new nt(e,this),this.templateSettings[e.templateCode]=t,!0)}},{key:"getAppId",value:function(){return this.appId}},{key:"getAccountId",value:function(){return w.getAccountId(this.appId)}},{key:"getDistinctId",value:function(){return w.getDistinctId(this.appId)}},{key:"getClientUserId",value:function(){return this.clientUserId}},{key:"getClientUserIdAsync",value:(r=c(d().m(function e(n,r){var i=this;return d().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(t,e){tt.getInstance(i.appId).getClientUserId(n,r,function(e){t(e)})}))},e)})),function(e,t){return r.apply(this,arguments)})},{key:"updateAppConfigs",value:(t=c(d().m(function e(t){var n,r,i,a;return d().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:if(!((n=t.localUserId)&&0<n)){e.n=4;break}if(r=t.templateInfo){e.n=2;break}return e.a(2);case 2:return(!(i=r.userIdPeriod)||i<0)&&(i=D),i=w.getCurrentTimeStamp()/1e3+i,e.n=3,k.getStorage(this.localUserKey);case 3:return a=e.v,a={localUserId:n,userIdExpiredTime:i,lastClientUserId:(a=a||{}).lastClientUserId,lastAccountId:a.lastAccountId},e.n=4,k.setStorage(this.localUserKey,a);case 4:return e.a(2)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getLocalUserId",value:(e=c(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.getStorage(this.localUserKey);case 1:if(t=e.v){e.n=2;break}return e.a(2,"");case 2:if(-1===t.userIdExpiredTime)return e.a(2,"");e.n=3;break;case 3:if(w.getCurrentTimeStamp()/1e3>t.userIdExpiredTime)return v.info("local userId has expired and has been cleared"),e.a(2,"");e.n=4;break;case 4:return e.a(2,t.localUserId)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"doChangeAccount",value:(n=c(d().m(function e(t,n){var r,i,a,s;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.getStorage(this.localUserKey);case 1:return r=e.v,i=!0,(a=(r=r||{}).lastClientUserId)&&(i=!1),(a=a!==n)&&(r.lastClientUserId=n),s=r.lastAccountId,(s=s!==t)&&(r.lastAccountId=t),this.clientUserId=n,(a||s)&&(r.localUserId="",r.userIdExpiredTime=-1),e.n=2,k.setStorage(this.localUserKey,r);case 2:return e.a(2,{isFirstChange:i,isChangeAccount:a||s})}},e,this)})),function(e,t){return n.apply(this,arguments)})}]);var n,e,t,r,i})(),S=(()=>{function e(){u(this,e),this.tasks=[],this.timeStamp=0}return l(e,[{key:"addTask",value:function(e){var t=function(){return e.apply(this)}.bind(this);this.tasks.push(t),this.run()}},{key:"run",value:(t=c(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.n){case 0:if(this.tasks.length<=0)return e.a(2);e.n=1;break;case 1:if(0===this.timeStamp||15e3<Date.now()-this.timeStamp)return this.timeStamp=Date.now(),t=this.tasks.shift(),e.n=2,t();e.n=3;break;case 2:this.timeStamp=0,this.run();case 3:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e.instance=e.instance?e.instance:new e}}]);var t})(),_=(()=>{function i(e){u(this,i),v.enabled=e.enableLog,this.tempNetStatusList=[],this.accountTaskQueue=new et,this.mAppSetting=new st(e),I.getInstance().addTimerTaskCallBack(this.onTimerTaskCallBack.bind(this));var n=this;w.registerAnalyticsObserver(function(e,t){n.doAnalyticsObserver(e,t)},e.appId),k.onNetworkStatusChange(function(e){n.doNetWorkChanged(e)})}return l(i,[{key:"_init",value:(o=c(d().m(function e(t){return d().w(function(e){for(;;)switch(e.n){case 0:S.getInstance().addTask(c(d().m(function e(){return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,at.getInstance().loadLocalConfig(t);case 1:if(at.getInstance().isRCCStop(t.appId))return e.a(2);e.n=2;break;case 2:if(i.systemInfos){e.n=4;break}return e.n=3,k.getSystemInfo();case 3:i.systemInfos=e.v;case 4:return e.n=5,this.mAppSetting.initAsync(t.templateCode);case 5:return I.getInstance().registerPageLifeCycle(t),I.getInstance().addNewConfigs(t),e.n=6,this.fetchWithTempCode(t.templateCode,3,!1);case 6:v.info("TDRemoteConfig SDK initialize success with appId = "+t.appId+" , templateCode = "+t.templateCode+" , version = "+x);case 7:return e.a(2)}},e,this)})).bind(this));case 1:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setCustomFetchParams",value:function(e,t){var n=this.mAppSetting.getTemplateSetting(t);n&&S.getInstance().addTask(function(){n.mergeCustomFetchParams(e)})}},{key:"removeCustomFetchParams",value:function(e,t){var n=this.mAppSetting.getTemplateSetting(t);n&&S.getInstance().addTask(function(){n.removeCustomParams(e)})}},{key:"applyDefaultParams",value:function(e,t){t=this.mAppSetting.getTemplateSetting(t);t&&t.mergeDefaultParams(e)}},{key:"clearDefaultParams",value:function(e){e=this.mAppSetting.getTemplateSetting(e);e&&e.clearDefaultParams()}},{key:"applyDefaultParamsWithJsonFile",value:(r=c(d().m(function e(t,n){var r,i;return d().w(function(e){for(;;)switch(e.n){case 0:if(r=this.mAppSetting.getTemplateSetting(n))return e.n=1,k.readFile(t);e.n=2;break;case 1:i=e.v,r.mergeDefaultParams(JSON.parse(i));case 2:return e.a(2)}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"addConfigFetchListener",value:function(e,t){m.isFunction(e)&&(t=this.mAppSetting.getTemplateSetting(t))&&t.addConfigFetchListener(e)}},{key:"getAll",value:function(e){e=this.mAppSetting.getTemplateSetting(e);if(e)return e.getAll()}},{key:"fetchWithTempCode",value:(s=c(d().m(function e(t,n,r,i,a){var s,o,c,u,l,f,h;return d().w(function(e){for(;;)switch(e.n){case 0:if(s=this.mAppSetting.getTemplateSetting(t)){e.n=1;break}return e.a(2);case 1:if(r&&s.isRequestControl())return e.a(2);e.n=2;break;case 2:return u=i||this.mAppSetting.getAccountId(),l=a||this.mAppSetting.getDistinctId(),o=this,c=s,u=u,l=l,e.n=3,this.mAppSetting.getLocalUserId();case 3:return h=e.v,f=this.mAppSetting.getClientUserId(),h={accountId:u,distinctId:l,userId:h,clientUserId:f},f=o.obtainPostParams.call(o,c,h),e.n=4,this.fetchAsync(s,n,f,r);case 4:return e.a(2)}},e,this)})),function(e,t,n,r,i){return s.apply(this,arguments)})},{key:"fetchAsync",value:(a=c(d().m(function e(t,n,r,i){var a,s,o;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k.isNetWorkConnect();case 1:if(e.v){e.n=2;break}return this.tempNetStatusList.push(t.getConfigTempCode()),e.a(2);case 2:if(t.addRequestCount(),i&&t.isRequestControl())return e.a(2);e.n=3;break;case 3:return s=w.getCurrentTimeStamp(),a=m.sign(s,JSON.stringify(r)),v.info1("fetch config start with appId = "+this.mAppSetting.getAppId()+" template = "+t.getConfigTempCode()+" params = ",r),e.n=4,k.request({url:t.getServerUrl(),header:{"Content-Type":"application/json",device_id:r.request_params["#device_id"],template_code:r.template_code,appid:this.mAppSetting.getAppId(),timestamp:s+"",sign:a},method:"POST",data:r});case 4:if(s=e.v,0===(o=m.parseResponse(s)).code)return v.info1("get remote config success = ",o.data),e.n=5,this.mAppSetting.updateAppConfigs(o.data);e.n=7;break;case 5:return e.n=6,t.updateRemoteConfigs(o);case 6:e.n=12;break;case 7:v.info("get remote config fail with code = "+o.code+" msg = "+o.msg),o.code<0&&-100<o.code?(t.uploadDebugEvent(o.code),I.getInstance().removeSystemErrorTask(this.mAppSetting.getAppId(),t.getConfigTempCode()),e.n=12):e.n=8;break;case 8:if(o.code<=-100&&-200<=o.code||-201===o.code){if(0<--n)return v.info("retry fetch after 3 seconds"),e.n=9,this.setTimeoutAsync(3e3);e.n=10}else e.n=11;break;case 9:return e.n=10,this.fetchAsync(t,n,r,i);case 10:e.n=12;break;case 11:-202===o.code||-203===o.code?t.downGradeMode():500<=o.code&&o.code<600||o.code===N||(o.code===R?w.trackRiskEvent(this.mAppSetting.getAppId()):I.getInstance().removeSystemErrorTask(this.mAppSetting.getAppId(),t.getConfigTempCode()));case 12:return e.a(2)}},e,this)})),function(e,t,n,r){return a.apply(this,arguments)})},{key:"setTimeoutAsync",value:(t=c(d().m(function e(n){return d().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,t){setTimeout(function(){e(!0)},n)}))},e)})),function(e){return t.apply(this,arguments)})},{key:"obtainPostParams",value:function(e,t){var n={},r=(n.appid=this.mAppSetting.getAppId(),t.userId),r=(r&&(n.local_user_id=r),n.template_code=e.getTempCode(),n.last_fetch_time=e.templateInfo.lastFetchStamp?e.templateInfo.lastFetchStamp+"":"0",{"#account_id":t.accountId,"#distinct_id":t.distinctId,"#client_user_id":t.clientUserId,"#device_id":w.getDeviceId()});return m.extend(r,i.systemInfos),m.extend(r,e.getCustomParams()),n.request_params=r,n}},{key:"onTimerTaskCallBack",value:function(f,h){S.getInstance().addTask(c(d().m(function e(){var t,n,r,i,a,s,o,c,u,l;return d().w(function(e){for(;;)switch(e.n){case 0:if(0!==f&&1!==f){e.n=5;break}t=[],0===f?t=I.getInstance().normalTasks:1===f&&(t=I.getInstance().debugTasks),n=0;case 1:if(!(n<t.length)){e.n=4;break}if(a=t[n].appId,r=t[n].tempCode,a!==this.mAppSetting.getAppId()){e.n=3;break}if(i=this.mAppSetting.getTemplateSetting(r)){e.n=2;break}return e.a(3,3);case 2:if((a=i.isExpired())&&i.notifyConfigChanged(),a||t[n].isDebug)return e.n=3,this.fetchWithTempCode(r,1,!1);e.n=3;break;case 3:n++,e.n=1;break;case 4:e.n=11;break;case 5:if(2!==f)e.n=7;else{if(h.appId===this.mAppSetting.getAppId())return e.n=6,this.fetchWithTempCode(h.tempCode,1,!0);e.n=6}break;case 6:e.n=11;break;case 7:if(3!==f){e.n=11;break}s=I.getInstance().normalTasks,o=0;case 8:if(!(o<s.length)){e.n=11;break}if(c=s[o].appId,u=s[o].tempCode,c!==this.mAppSetting.getAppId()){e.n=10;break}if(l=this.mAppSetting.getTemplateSetting(u)){e.n=9;break}return e.a(3,10);case 9:if(l.isFetchExpired())return e.n=10,this.fetchWithTempCode(u,1,!0);e.n=10;break;case 10:o++,e.n=8;break;case 11:return e.a(2)}},e,this)})).bind(this))}},{key:"doAnalyticsObserver",value:(n=c(d().m(function e(t,a){var s;return d().w(function(e){for(;;)switch(e.n){case 0:if(at.getInstance().isRCCStop(this.mAppSetting.getAppId()))return e.a(2);e.n=1;break;case 1:if("onAccountChanged"===t)return e.n=2,this.mAppSetting.getClientUserIdAsync(a.accountId,a.distinctId);e.n=3;break;case 2:s=e.v,S.getInstance().addTask(c(d().m(function e(){var r,i=this;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.mAppSetting.doChangeAccount(a.accountId,s);case 1:if((r=e.v).isChangeAccount){e.n=2;break}return e.a(2);case 2:v.info("change account success with accountId = "+a.accountId+" , distinctId = "+a.distinctId),m.each(this.mAppSetting.templateSettings,(()=>{var n=c(d().m(function e(t,n){return d().w(function(e){for(;;)switch(e.n){case 0:if(r.isFirstChange){e.n=1;break}return e.n=1,t.clearOldConfig();case 1:return t.notifyConfigChanged(s),I.getInstance().removeDelayTemplateMessage(i.mAppSetting.getAppId(),t.getConfigTempCode()),e.n=2,i.fetchWithTempCode(n,1,!0,a.accountId,a.distinctId);case 2:return e.a(2)}},e)}));return function(e,t){return n.apply(this,arguments)}})());case 3:return e.a(2)}},e,this)})).bind(this));case 3:return e.a(2)}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"doNetWorkChanged",value:function(e){e&&e.isConnected&&S.getInstance().addTask(c(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.n){case 0:t=0;case 1:if(t<this.tempNetStatusList.length)return e.n=2,this.fetchWithTempCode(self.tempNetStatusList[t],1,!1);e.n=3;break;case 2:t++,e.n=1;break;case 3:this.tempNetStatusList=[];case 4:return e.a(2)}},e,this)})).bind(this))}}],[{key:"init",value:function(e){var t;(e=m.checkSettings(e))&&((t=i._shareInstance(e.appId))?t.mAppSetting.addTemplateCode(e)&&t._init(e):(t=new i(e),i.sInstanceMap[e.appId]=t,i._defaultInstance||(i._defaultInstance=t),t._init(e)))}},{key:"_shareInstance",value:function(e){return void 0!==(i.sInstanceMap=i.sInstanceMap?i.sInstanceMap:{})[e]?i.sInstanceMap[e]:void 0!==i._defaultInstance?i._defaultInstance:void 0}}]);var n,t,a,s,r,o})(),n=(()=>l(function e(){u(this,e)},null,[{key:"init",value:function(e){_.init(e)}},{key:"setDefaultValues",value:function(e,t){t=_._shareInstance(t);t&&t.applyDefaultParams(e)}},{key:"setDefaultValuesWithJsonFile",value:function(e,t){t=_._shareInstance(t);t&&t.applyDefaultParamsWithJsonFile(e)}},{key:"clearDefaultValues",value:function(e){e=_._shareInstance(e);e&&e.clearDefaultParams()}},{key:"setCustomFetchParams",value:function(e,t,n){t=_._shareInstance(t);t&&t.setCustomFetchParams(e,n)}},{key:"removeCustomFetchParam",value:function(e,t,n){t=_._shareInstance(t);t&&t.removeCustomFetchParams(e,n)}},{key:"fetch",value:function(e,t){var n=_._shareInstance(e);n&&S.getInstance().addTask(c(d().m(function e(){return d().w(function(e){for(;;)switch(e.n){case 0:n.fetchWithTempCode(t,1,!0);case 1:return e.a(2)}},e)})))}},{key:"setLogPrintListener",value:function(e){v.listener=e}},{key:"addConfigFetchListener",value:function(e){var t=_._shareInstance();if(t)return t.addConfigFetchListener(e)}},{key:"getData",value:function(e,t){var n,e=_._shareInstance(e);return e&&(n=e.getAll(t)),new $e(n)}}]))();return k.setGlobalData(n),n});