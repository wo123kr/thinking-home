((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).TDApp=t()})(this,function(){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(a.key),a)}}function e(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var t=(()=>{function t(e){r(this,t),this.api=e}return e(t,[{key:"getAnalyticGlobalData",value:function(){return this.api.tdanalytics2024}},{key:"getConfigGlobalData",value:function(){return this.api.tdremoteconfig2024}},{key:"getStrategyGlobalData",value:function(){return this.api.tdstrategy2024}}],[{key:"createInstance",value:function(){return new t(window)}}])})(),u=(()=>e(function e(){r(this,e)},null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=t.createInstance())}},{key:"getAnalyticGlobalData",value:function(){return this._getCurrentPlatform().getAnalyticGlobalData()}},{key:"getConfigGlobalData",value:function(){return this._getCurrentPlatform().getConfigGlobalData()}},{key:"getStrategyGlobalData",value:function(){return this._getCurrentPlatform().getStrategyGlobalData()}}]))(),f={},n=Object.prototype.toString,o=Array.isArray;f.isArray=o||function(e){return"[object Array]"===n.call(e)};return(()=>e(function e(){r(this,e)},null,[{key:"init",value:function(e){if(e){var t=u.getAnalyticGlobalData(),r=u.getConfigGlobalData(),a=u.getStrategyGlobalData();if(t&&(t.init(e),r)){var n=e.templates;if(f.isArray(n))for(var o=0;o<n.length;o++){var i,l=n[o];l&&(i="none","td_strategy"===l.templateCode&&(i=l.debugMode||l.mode),r.init({appId:e.appId,serverUrl:e.serverUrl,enableLog:e.enableLog,templateCode:l.templateCode,customFetchParams:l.customFetchParams,debugMode:i}))}else r.init({appId:e.appId,serverUrl:e.serverUrl,templateCode:"",enableLog:e.enableLog});a&&a.init({appId:e.appId,serverUrl:e.serverUrl,enableLog:e.enableLog,debugMode:e.debugMode||e.mode,triggerListener:e.triggerListener})}}}}]))()});