function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==typeof e?e:e+""}var PlatformProxy=(()=>{function t(e){_classCallCheck(this,t),this.api=e}return _createClass(t,[{key:"getAnalyticGlobalData",value:function(){return this.api.tdanalytics2024}},{key:"getConfigGlobalData",value:function(){return this.api.tdremoteconfig2024}},{key:"getStrategyGlobalData",value:function(){return this.api.tdstrategy2024}}],[{key:"createInstance",value:function(){return new t(window)}}])})(),PlatformAPI=(()=>_createClass(function e(){_classCallCheck(this,e)},null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=PlatformProxy.createInstance())}},{key:"getAnalyticGlobalData",value:function(){return this._getCurrentPlatform().getAnalyticGlobalData()}},{key:"getConfigGlobalData",value:function(){return this._getCurrentPlatform().getConfigGlobalData()}},{key:"getStrategyGlobalData",value:function(){return this._getCurrentPlatform().getStrategyGlobalData()}}]))(),_={},ObjProto=Object.prototype,nativeToString=ObjProto.toString,nativeIsArray=Array.isArray,STRATEGY_TEMPLATE_CODE=(_.isArray=nativeIsArray||function(e){return"[object Array]"===nativeToString.call(e)},"td_strategy"),TDApp=(()=>_createClass(function e(){_classCallCheck(this,e)},null,[{key:"init",value:function(e){if(e){var t=PlatformAPI.getAnalyticGlobalData(),r=PlatformAPI.getConfigGlobalData(),a=PlatformAPI.getStrategyGlobalData();if(t&&(t.init(e),r)){var n=e.templates;if(_.isArray(n))for(var o=0;o<n.length;o++){var i,l=n[o];l&&(i="none",l.templateCode===STRATEGY_TEMPLATE_CODE&&(i=l.debugMode||l.mode),r.init({appId:e.appId,serverUrl:e.serverUrl,enableLog:e.enableLog,templateCode:l.templateCode,customFetchParams:l.customFetchParams,debugMode:i}))}else r.init({appId:e.appId,serverUrl:e.serverUrl,templateCode:"",enableLog:e.enableLog});a&&a.init({appId:e.appId,serverUrl:e.serverUrl,enableLog:e.enableLog,debugMode:e.debugMode||e.mode,triggerListener:e.triggerListener})}}}}]))();module.exports=TDApp;